(function webpackUniversalModuleDefinition(root, factory) {
  if (typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if (typeof define === 'function' && define.amd) define([], factory);
        else if (typeof exports === 'object') exports['deck'] = factory();
  else root['deck'] = factory();})(globalThis, function () {
"use strict";var __exports__=(()=>{var fr=Object.create;var fe=Object.defineProperty;var pr=Object.getOwnPropertyDescriptor;var hr=Object.getOwnPropertyNames;var dr=Object.getPrototypeOf,mr=Object.prototype.hasOwnProperty;var Le=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Me=(e,r)=>{for(var t in r)fe(e,t,{get:r[t],enumerable:!0})},le=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of hr(r))!mr.call(e,s)&&s!==t&&fe(e,s,{get:()=>r[s],enumerable:!(i=pr(r,s))||i.enumerable});return e},S=(e,r,t)=>(le(e,r,"default"),t&&le(t,r,"default")),pe=(e,r,t)=>(t=e!=null?fr(dr(e)):{},le(r||!e||!e.__esModule?fe(t,"default",{value:e,enumerable:!0}):t,e)),yr=e=>le(fe({},"__esModule",{value:!0}),e);var xe=Le((Dr,Be)=>{Be.exports=globalThis.deck});var be=Le((V,he)=>{(function(e){"use strict";var r="Compound",t="Identifier",i="MemberExpression",s="Literal",p="ThisExpression",g="CallExpression",ne="UnaryExpression",se="BinaryExpression",X="LogicalExpression",oe="ConditionalExpression",A="ArrayExpression",w=46,l=44,J=39,ye=34,k=40,ie=41,Ee=91,ve=93,er=63,rr=59,tr=58,m=function(a,n){var O=new Error(a+" at character "+n);throw O.index=n,O.description=a,O},z=!0,F={"-":z,"!":z,"~":z,"+":z},P={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},ae=function(a){var n=0,O;for(var D in a)(O=D.length)>n&&a.hasOwnProperty(D)&&(n=O);return n},T=ae(F),U=ae(P),$={true:!0,false:!1,null:null},nr="this",Je=function(a){return P[a]||0},ke=function(a,n,O){var D=a==="||"||a==="&&"?X:se;return{type:D,operator:a,left:n,right:O}},Q=function(a){return a>=48&&a<=57},W=function(a){return a===36||a===95||a>=65&&a<=90||a>=97&&a<=122||a>=128&&!P[String.fromCharCode(a)]},ge=function(a){return a===36||a===95||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||a>=128&&!P[String.fromCharCode(a)]},h=function(a){for(var n=0,O=a.charAt,D=a.charCodeAt,v=function(o){return O.call(a,o)},f=function(o){return D.call(a,o)},G=a.length,x=function(){for(var o=f(n);o===32||o===9||o===10||o===13;)o=f(++n)},R=function(){var o=or(),u,c;if(x(),f(n)===er){if(n++,u=R(),u||m("Expected expression",n),x(),f(n)===tr)return n++,c=R(),c||m("Expected expression",n),{type:oe,test:o,consequent:u,alternate:c};m("Expected :",n)}else return o},Fe=function(){x();for(var o,u=a.substr(n,U),c=u.length;c>0;){if(P.hasOwnProperty(u)&&(!W(f(n))||n+u.length<a.length&&!ge(f(n+u.length))))return n+=c,u;u=u.substr(0,--c)}return!1},or=function(){var o,u,c,y,E,b,_,H,L,Re;if(_=ue(),c=Fe(),!c)return _;for(b={value:c,prec:Je(c)},H=ue(),H||m("Expected expression after "+c,n),E=[_,b,H];(c=Fe())&&(y=Je(c),y!==0);){for(b={value:c,prec:y},Re=c;E.length>2&&y<=E[E.length-2].prec;)H=E.pop(),c=E.pop().value,_=E.pop(),u=ke(c,_,H),E.push(u);u=ue(),u||m("Expected expression after "+Re,n),E.push(b,u)}for(L=E.length-1,u=E[L];L>1;)u=ke(E[L-1].value,E[L-2],u),L-=2;return u},ue=function(){var o,u,c;if(x(),o=f(n),Q(o)||o===w)return ir();if(o===J||o===ye)return ar();if(o===Ee)return lr();for(u=a.substr(n,T),c=u.length;c>0;){if(F.hasOwnProperty(u)&&(!W(f(n))||n+u.length<a.length&&!ge(f(n+u.length))))return n+=c,{type:ne,operator:u,argument:ue(),prefix:!0};u=u.substr(0,--c)}return W(o)||o===k?ur():!1},ir=function(){for(var o="",u,c;Q(f(n));)o+=v(n++);if(f(n)===w)for(o+=v(n++);Q(f(n));)o+=v(n++);if(u=v(n),u==="e"||u==="E"){for(o+=v(n++),u=v(n),(u==="+"||u==="-")&&(o+=v(n++));Q(f(n));)o+=v(n++);Q(f(n-1))||m("Expected exponent ("+o+v(n)+")",n)}return c=f(n),W(c)?m("Variable names cannot start with a number ("+o+v(n)+")",n):c===w&&m("Unexpected period",n),{type:s,value:parseFloat(o),raw:o}},ar=function(){for(var o="",u=v(n++),c=!1,y;n<G;)if(y=v(n++),y===u){c=!0;break}else if(y==="\\")switch(y=v(n++),y){case"n":o+=`
`;break;case"r":o+="\r";break;case"t":o+="	";break;case"b":o+="\b";break;case"f":o+="\f";break;case"v":o+="\v";break;default:o+=y}else o+=y;return c||m('Unclosed quote after "'+o+'"',n),{type:s,value:o,raw:u+o+u}},Te=function(){var o=f(n),u=n,c;for(W(o)?n++:m("Unexpected "+v(n),n);n<G&&(o=f(n),ge(o));)n++;return c=a.slice(u,n),$.hasOwnProperty(c)?{type:s,value:$[c],raw:c}:c===nr?{type:p}:{type:t,name:c}},Ue=function(o){for(var u,c=[],y,E=!1,b=0;n<G;)if(x(),u=f(n),u===o){E=!0,n++,o===ie&&b&&b>=c.length&&m("Unexpected token "+String.fromCharCode(o),n);break}else if(u===l){if(n++,b++,b!==c.length){if(o===ie)m("Unexpected token ,",n);else if(o===ve)for(var _=c.length;_<b;_++)c.push(null)}}else y=R(),(!y||y.type===r)&&m("Expected comma",n),c.push(y);return E||m("Expected "+String.fromCharCode(o),n),c},ur=function(){var o,u;for(o=f(n),o===k?u=cr():u=Te(),x(),o=f(n);o===w||o===Ee||o===k;)n++,o===w?(x(),u={type:i,computed:!1,object:u,property:Te()}):o===Ee?(u={type:i,computed:!0,object:u,property:R()},x(),o=f(n),o!==ve&&m("Unclosed [",n),n++):o===k&&(u={type:g,arguments:Ue(ie),callee:u}),x(),o=f(n);return u},cr=function(){n++;var o=R();if(x(),f(n)===ie)return n++,o;m("Unclosed (",n)},lr=function(){return n++,{type:A,elements:Ue(ve)}},ce=[],Oe,De;n<G;)Oe=f(n),Oe===rr||Oe===l?n++:(De=R())?ce.push(De):n<G&&m('Unexpected "'+v(n)+'"',n);return ce.length===1?ce[0]:{type:r,body:ce}};if(h.version="0.3.5",h.toString=function(){return"JavaScript Expression Parser (JSEP) v"+h.version},h.addUnaryOp=function(a){return T=Math.max(a.length,T),F[a]=z,this},h.addBinaryOp=function(a,n){return U=Math.max(a.length,U),P[a]=n,this},h.addLiteral=function(a,n){return $[a]=n,this},h.removeUnaryOp=function(a){return delete F[a],a.length===T&&(T=ae(F)),this},h.removeAllUnaryOps=function(){return F={},T=0,this},h.removeBinaryOp=function(a){return delete P[a],a.length===U&&(U=ae(P)),this},h.removeAllBinaryOps=function(){return P={},U=0,this},h.removeLiteral=function(a){return delete $[a],this},h.removeAllLiterals=function(){return $={},this},typeof V>"u"){var sr=e.jsep;e.jsep=h,h.noConflict=function(){return e.jsep===h&&(e.jsep=sr),h}}else typeof he<"u"&&he.exports?V=he.exports=h:V.parse=h})(V)});var te={};Me(te,{JSONConfiguration:()=>N,JSONConverter:()=>ee,Transport:()=>re,_convertFunctions:()=>Y,_parseExpressionString:()=>I,_shallowEqualObjects:()=>Ze});var C={},je=pe(xe(),1);S(C,pe(xe(),1));if(!je.Layer)throw new Error("@deck.gl/core is not found");S(te,C);function M(e,r=""){if(!e)throw new Error(`JSON conversion error ${r}`)}function Ye(e,r){let t=vr(r),i=e;for(let s of t)i=Er(i)?i[s]:void 0;return i}function Er(e){return e!==null&&typeof e=="object"}var Ke={};function vr(e){if(typeof e=="string"){let r=Ke[e];return r||(r=e.split("."),Ke[e]=r),r}return Array.isArray(e)?e:[e]}var Ce={};Me(Ce,{addBinaryOp:()=>Cr,addUnaryOp:()=>br,compile:()=>Or,compileAsync:()=>xr,eval:()=>d,evalAsync:()=>Z,parse:()=>Qe.default});var B=pe(be()),Qe=pe(be()),Z=function e(r,t){try{var i,s=r;switch(s.type){case"ArrayExpression":return Promise.resolve(Xe(s.elements,t));case"BinaryExpression":return Promise.resolve(Promise.all([e(s.left,t),e(s.right,t)])).then(function(l){return j[s.operator](l[0],l[1])});case"CallExpression":var p,g,ne,se=function(){if(typeof g=="function"){var l=g,J=l.apply,ye=p;return Promise.resolve(Xe(s.arguments,t)).then(function(k){return Promise.resolve(J.call(l,ye,k))})}},X=s.callee.type==="MemberExpression"?Promise.resolve(qe(s.callee,t)).then(function(l){p=(ne=l)[0],g=ne[1]}):Promise.resolve(e(s.callee,t)).then(function(l){g=l});return Promise.resolve(X&&X.then?X.then(se):se());case"ConditionalExpression":return Promise.resolve(e(s.test,t)).then(function(l){return Promise.resolve(e(l?s.consequent:s.alternate,t))});case"Identifier":return Promise.resolve(t[s.name]);case"Literal":return Promise.resolve(s.value);case"LogicalExpression":var oe=function(l){return i?l:Promise.resolve(Promise.all([e(s.left,t),e(s.right,t)])).then(function(J){return j[s.operator](J[0],J[1])})},A=s.operator==="||"?(i=1,Promise.resolve(e(s.left,t)).then(function(l){return l||Promise.resolve(e(s.right,t))})):function(){if(s.operator==="&&")return i=1,Promise.resolve(e(s.left,t)).then(function(l){return l&&Promise.resolve(e(s.right,t))})}();return Promise.resolve(A&&A.then?A.then(oe):oe(A));case"MemberExpression":return Promise.resolve(qe(s,t)).then(function(l){return l[1]});case"ThisExpression":return Promise.resolve(t);case"UnaryExpression":var w=de[s.operator];return Promise.resolve(e(s.argument,t)).then(function(l){return w.call(de,l)});default:return Promise.resolve(void 0)}}catch(l){return Promise.reject(l)}},qe=function(e,r){try{return Promise.resolve(Z(e.object,r)).then(function(t){function i(){if(/^__proto__|prototype|constructor$/.test(s))throw Error('Access to member "'+s+'" disallowed.');return[t,t[s]]}var s,p=function(){if(e.computed)return Promise.resolve(Z(e.property,r)).then(function(g){s=g});s=e.property.name}();return p&&p.then?p.then(i):i()})}catch(t){return Promise.reject(t)}},Xe=function(e,r){try{return Promise.resolve(Promise.all(e.map(function(t){return Z(t,r)})))}catch(t){return Promise.reject(t)}},gr={"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},j={"||":function(e,r){return e||r},"&&":function(e,r){return e&&r},"|":function(e,r){return e|r},"^":function(e,r){return e^r},"&":function(e,r){return e&r},"==":function(e,r){return e==r},"!=":function(e,r){return e!=r},"===":function(e,r){return e===r},"!==":function(e,r){return e!==r},"<":function(e,r){return e<r},">":function(e,r){return e>r},"<=":function(e,r){return e<=r},">=":function(e,r){return e>=r},"<<":function(e,r){return e<<r},">>":function(e,r){return e>>r},">>>":function(e,r){return e>>>r},"+":function(e,r){return e+r},"-":function(e,r){return e-r},"*":function(e,r){return e*r},"/":function(e,r){return e/r},"%":function(e,r){return e%r}},de={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}};function ze(e,r){return e.map(function(t){return d(t,r)})}function $e(e,r){var t,i=d(e.object,r);if(t=e.computed?d(e.property,r):e.property.name,/^__proto__|prototype|constructor$/.test(t))throw Error('Access to member "'+t+'" disallowed.');return[i,i[t]]}function d(e,r){var t=e;switch(t.type){case"ArrayExpression":return ze(t.elements,r);case"BinaryExpression":return j[t.operator](d(t.left,r),d(t.right,r));case"CallExpression":var i,s,p;return t.callee.type==="MemberExpression"?(i=(p=$e(t.callee,r))[0],s=p[1]):s=d(t.callee,r),typeof s!="function"?void 0:s.apply(i,ze(t.arguments,r));case"ConditionalExpression":return d(t.test,r)?d(t.consequent,r):d(t.alternate,r);case"Identifier":return r[t.name];case"Literal":return t.value;case"LogicalExpression":return t.operator==="||"?d(t.left,r)||d(t.right,r):t.operator==="&&"?d(t.left,r)&&d(t.right,r):j[t.operator](d(t.left,r),d(t.right,r));case"MemberExpression":return $e(t,r)[1];case"ThisExpression":return r;case"UnaryExpression":return de[t.operator](d(t.argument,r));default:return}}function Or(e){return d.bind(null,(0,B.default)(e))}function xr(e){return Z.bind(null,(0,B.default)(e))}function br(e,r){B.default.addUnaryOp(e),de[e]=r}function Cr(e,r,t){t?(B.default.addBinaryOp(e,r),j[e]=t):(B.default.addBinaryOp(e,gr[e]||1),j[e]=r)}var{parse:Pr,eval:Nr}=Ce,Pe={"-":e=>e};function I(e,r){if(e in Pe)return Pe[e];let t,i=Pr(e);return i.type==="Identifier"?t=s=>Ye(s,e):(Ne(i,s=>{if(s.type==="CallExpression")throw new Error("Function calls not allowed in JSON expressions")}),t=s=>Nr(i,s)),Pe[e]=t,t}function Ne(e,r){if(Array.isArray(e))e.forEach(t=>Ne(t,r));else if(e&&typeof e=="object"){e.type&&r(e);for(let t in e)Ne(e[t],r)}}var K="@@=",_e="@@#",We="@@type",me="@@function";var Ge=e=>e&&typeof e=="object",N=class{constructor(...r){this.typeKey=We;this.functionKey=me;this.log=console;this.classes={};this.reactComponents={};this.enumerations={};this.constants={};this.functions={};this.React=null;this.convertFunction=I;this.preProcessClassProps=(r,t)=>t;this.postProcessConvertedJson=r=>r;for(let t of r)this.merge(t)}merge(r){for(let t in r)switch(t){case"layers":case"views":Object.assign(this.classes,r[t]);break;default:if(t in this){let i=r[t];this[t]=Ge(this[t])?Object.assign(this[t],i):i}}}validate(r){return M(!this.typeKey||typeof this.typeKey=="string"),M(Ge(this.classes)),!0}};function _r(e){return typeof e=="string"&&e.startsWith(K)}function Sr(e){return e.replace(K,"")}function Y(e,r){let t={};for(let i in e){let s=e[i];_r(s)&&(s=Sr(s),s=I(s,r)),t[i]=s}return t}function He(e,r,t){let i=t.classes[e],s=t.reactComponents[e];if(!i&&!s){let{log:p}=t;if(p){let g=JSON.stringify(r,null,0).slice(0,40);p.warn(`JSON converter: No registered class of type ${e}(${g}...)  `)}return null}return i?wr(i,r,t):Ir(s,r,t)}function wr(e,r,t){return t.preProcessClassProps&&(r=t.preProcessClassProps(e,r,t)),r=Y(r,t),new e(r)}function Ir(e,r,t){let{React:i}=t,{children:s=[]}=r;return delete r.children,t.preProcessClassProps&&(r=t.preProcessClassProps(e,r,t)),r=Y(r,t),i.createElement(e,r,s)}function Ve(e,r,t){let i=t.functions[e];if(!i){let{log:s}=t;if(s){let p=JSON.stringify(r,null,0).slice(0,40);s.warn(`JSON converter: No registered function ${e}(${p}...)  `)}return null}return i(r)}function Se(e){return typeof e=="string"?JSON.parse(e):e}var we=e=>e&&typeof e=="object",ee=class{constructor(r){this.log=console;this.onJSONChange=()=>{};this.json=null;this.convertedJson=null;this.setProps(r)}finalize(){}setProps(r){"configuration"in r&&(this.configuration=r.configuration instanceof N?r.configuration:new N(r.configuration)),"onJSONChange"in r&&(this.onJSONChange=r.onJSONChange)}mergeConfiguration(r){this.configuration.merge(r)}convert(r){if(!r||r===this.json)return this.convertedJson;this.json=r;let t=Se(r),i=Ar(t,this.configuration);return i=this.configuration.postProcessConvertedJson(i),this.convertedJson=i,i}convertJson(r){return this.convert(r)}};function Ar(e,r){return r=new N(r),Ie(e,"",r)}function Ie(e,r,t){return Array.isArray(e)?e.map((i,s)=>Ie(i,String(s),t)):Jr(e,t)?kr(e,t):we(e)?me in e?Fr(e,t):Ae(e,t):typeof e=="string"?Tr(e,r,t):e}function Jr(e,r){let{typeKey:t}=r;return we(e)&&Boolean(e[t])}function kr(e,r){let{typeKey:t}=r,i=e[t],s={...e};return delete s[t],s=Ae(s,r),He(i,s,r)}function Fr(e,r){let{functionKey:t}=r,i=e[t],s={...e};return delete s[t],s=Ae(s,r),Ve(i,s,r)}function Ae(e,r){M(we(e));let t={};for(let i in e){let s=e[i];t[i]=Ie(s,i,r)}return t}function Tr(e,r,t){if(e.startsWith(K)&&t.convertFunction)return e=e.replace(K,""),t.convertFunction(e,t);if(e.startsWith(_e)){if(e=e.replace(_e,""),t.constants[e])return t.constants[e];let[i,s]=e.split(".");return t.enumerations[i][s]}return e}var q={onInitialize:e=>e,onFinalize:e=>e,onMessage:e=>e},re=class{constructor(r="Transport"){this._messageQueue=[];this.userData={};this._destroyed=!1;this.name=r}static setCallbacks({onInitialize:r,onFinalize:t,onMessage:i}){r&&(q.onInitialize=r),t&&(q.onFinalize=t),i&&(q.onMessage=i)}getRootDOMElement(){return typeof document<"u"?document.body:null}sendJSONMessage(){console.error("Back-channel not implemented for this transport")}sendBinaryMessage(){console.error("Back-channel not implemented for this transport")}_initialize(r={}){let t={transport:this,...r};q.onInitialize(t)}_finalize(r={}){let t={transport:this,...r};q.onFinalize(t),this._destroyed=!0}_messageReceived(r={}){r={transport:this,...r},console.debug("Delivering transport message",r),q.onMessage(r)}static _stringifyJSONSafe(r){let t=new Set;return JSON.stringify(r,(i,s)=>{if(typeof s=="object"&&s!==null){if(t.has(s))try{return JSON.parse(JSON.stringify(s))}catch{return}t.add(s)}return s})}};function Ze(e,r){if(e===r)return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null||Object.keys(e).length!==Object.keys(r).length)return!1;for(let t in e)if(!(t in r)||e[t]!==r[t])return!1;for(let t in r)if(!(t in e))return!1;return!0}return yr(te);})();
      return __exports__;
      });
